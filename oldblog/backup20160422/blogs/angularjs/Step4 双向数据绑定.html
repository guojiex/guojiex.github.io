<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.3 (452849)"/><meta name="altitude" content="304"/><meta name="author" content="Jiexin Guo"/><meta name="created" content="2016-01-06 20:45:47 +0000"/><meta name="latitude" content="40.44208414314422"/><meta name="longitude" content="-79.94635131961954"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2016-01-07 16:17:15 +0000"/><title>Step4 双向数据绑定</title></head><body>
<div>模板：</div>
<div>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong style="box-sizing: border-box; font-weight: 700;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">app</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">index</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">html</span></code>:</strong></p>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">Search: </span><span style="box-sizing: border-box; color: navy;">&lt;input</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: teal;">ng-model</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"query"</span><span style="box-sizing: border-box; color: navy;">&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
Sort by:<br/></span><span style="box-sizing: border-box; color: navy;">&lt;select</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: teal;">ng-model</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"orderProp"</span><span style="box-sizing: border-box; color: navy;">&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: navy;">&lt;option</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: teal;">value</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"name"</span><span style="box-sizing: border-box; color: navy;">&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">Alphabetical</span><span style="box-sizing: border-box; color: navy;">&lt;/option&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: navy;">&lt;option</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: teal;">value</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"age"</span><span style="box-sizing: border-box; color: navy;">&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">Newest</span><span style="box-sizing: border-box; color: navy;">&lt;/option&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: navy;">&lt;/select&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
<br/></span><span style="box-sizing: border-box; color: navy;">&lt;ul</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: teal;">class</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"phones"</span><span style="box-sizing: border-box; color: navy;">&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: navy;">&lt;li</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: teal;">ng-repeat</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"phone in phones | filter:query | orderBy:orderProp"</span><span style="box-sizing: border-box; color: navy;">&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: navy;">&lt;span&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{{phone.name}}</span><span style="box-sizing: border-box; color: navy;">&lt;/span&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: navy;">&lt;p&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{{phone.snippet}}</span><span style="box-sizing: border-box; color: navy;">&lt;/p&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: navy;">&lt;/li&gt;</span></code>
<div><span style="box-sizing: border-box; color: navy;"><span style="background-color: transparent;"><span style="font-size: inherit;">&lt;/ul&gt;</span></span></span></div>
</div>
</div>
<ul>
<li>首先我们添加了一个&lt;select&gt;的html标签（名字叫做orderProp），让我们的用户可以从两个提供的排序条件中选一个</li>
</ul>
<div><span style="font: 12.0px Helvetica"><img src="Step4%20%E5%8F%8C%E5%90%91%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A.resources/004561F2-8298-48B6-A17C-5BC57A311862.png" height="425" width="661"/></span></div>
<ul>
<li>然后我们把filter用orderBy过滤器进行进一步处理。orderBy是一个过滤器，输入一个数组，把它进行拷贝并且把拷贝进行重新排序然后返回</li>
</ul>
<div><br/></div>
<div>
<hr/></div>
<div>控制器：</div>
<div>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong style="box-sizing: border-box; font-weight: 700;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">app</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controllers</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span></code>:</strong></p>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> phonecatApp </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> angular</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">module</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phonecatApp'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[]);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  $scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'name'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Nexus S'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'snippet'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Fast just got faster with Nexus S.'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">1</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">},</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'name'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Motorola XOOM™ with Wi-Fi'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'snippet'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'The Next, Next Generation tablet.'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">2</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">},</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'name'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'MOTOROLA XOOM™'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'snippet'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'The Next, Next Generation tablet.'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">3</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">}</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">];</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  $scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">orderProp </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span></code></div>
</div>
<div><br/></div>
<ul>
<li>我们修改了phones模型（phone数组），向每一个Phone记录添加了一个名为age的属性，这个属性用来对phone进行排序</li>
<li>我们添加了一行代码，把orderBy的值默认设置成age，如果我们不设置初始值的话，orderBy过滤器的值会保持未初始化直到用户选择了其中的一项为止</li>
</ul>
<div><br/></div>
<div>
<hr/></div>
<div>测试：</div>
<div>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong style="box-sizing: border-box; font-weight: 700;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">test</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">unit</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controllersSpec</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span></code>:</strong></p>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">describe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneCat controllers'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  describe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(){</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> ctrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
    beforeEach</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">module</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phonecatApp'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">));</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
    beforeEach</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">inject</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
      scope </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{};</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
      ctrl </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">}));</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
    it</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'should create "phones" model with 3 phones'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
      expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">length</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toBe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">3</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
<br/>
    it</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'should set the default value of orderProp model'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
      expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">orderProp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toBe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span></code></div>
</div>
<div><br/></div>
<div>现在的单元测试，只是测试了默认顺序为age</div>
<div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">We used Jasmine's API to extract the controller construction into a </span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 5px; color: maroon; background-color: rgb(244, 244, 244); white-space: nowrap; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">beforeEach</span></code><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;"> block, which is shared by all tests in the parent </span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 5px; color: maroon; background-color: rgb(244, 244, 244); white-space: nowrap; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">describe</span></code><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;"> block.</span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">下面我们测试端对端测试：</span></span></div>
<div>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong style="box-sizing: border-box; font-weight: 700;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">test</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">e2e</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scenarios</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span></code>:</strong></p>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">...</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
it</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'should be possible to control phone order via the drop down select box'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> phoneNameColumn </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> element</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">all</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">by</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">repeater</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phone in phones'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">column</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'<a href="http://phone.name">phone.name</a>'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">));</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> query </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> element</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">by</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">model</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'query'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">));</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> getNames</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">return</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> phoneNameColumn</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">map</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">elm</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
     </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">return</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> elm</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">getText</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">();</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">}</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  query</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">sendKeys</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'tablet'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(153, 153, 136);">//let's narrow the dataset to make the test assertions shorter</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">getNames</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toEqual</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">([</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"Motorola XOOM\u2122 with Wi-Fi"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"MOTOROLA XOOM\u2122"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">]);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  element</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">by</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">model</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'orderProp'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">element</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">by</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">css</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'option[value="name"]'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">click</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">();</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">getNames</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toEqual</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">([</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"MOTOROLA XOOM\u2122"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
   </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"Motorola XOOM\u2122 with Wi-Fi"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">]);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});...</span></code></div>
</div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
<div><br/></div>
<div><br/></div>
<div><br/></div>
<div><br/></div>
<div><br/></div>
<div><br/></div>
</body></html>