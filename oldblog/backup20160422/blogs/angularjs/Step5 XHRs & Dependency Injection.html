<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="exporter-version" content="Evernote Mac 6.3 (452849)"/><meta name="altitude" content="304"/><meta name="author" content="Jiexin Guo"/><meta name="created" content="2016-01-07 16:25:15 +0000"/><meta name="latitude" content="40.44206222832349"/><meta name="longitude" content="-79.94639976203533"/><meta name="source" content="desktop.mac"/><meta name="updated" content="2016-01-09 18:09:38 +0000"/><title>Step5 XHRs &amp; Dependency Injection</title></head><body>
<div>数据：</div>
<div><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">app</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">phones</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">phones</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">json</span>这个文件包含了很多phone记录（json格式），样例如下：</div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"age"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">13</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"id"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"motorola-defy-with-motoblur"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"name"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"Motorola DEFY\u2122 with MOTOBLUR\u2122"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(221, 17, 68);">"snippet"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">"Are you ready for everything life throws your way?"</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">...</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">},</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">...</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">]</span></code></div>
</div>
<div><br/></div>
<div>
<hr/></div>
<div>控制器：</div>
<div>我们会使用angular的$http服务在我们的控制器中，来产生http请求以获得服务器上的app/phones/phones.json文件。$http是一个内置的angular服务，可以处理普通的网络应用的操作。</div>
<div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">Services are managed by Angular's </span><a href="https://docs.angularjs.org/tutorial/guide/di" style="box-sizing: border-box; color: rgb(66, 139, 202); text-decoration: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: 0px 0px; background-repeat: initial initial;">DI subsystem</a><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">. 依赖注入可以是你的网络应用有更好的结构（把显示，数据，控制分离）以及松耦合（部件之间的依赖并不靠他们自己解决，而是借助DI subsystem）</span></div>
<div>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong style="box-sizing: border-box; font-weight: 700;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">app</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controllers</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span></code></strong></p>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> phonecatApp </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> angular</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">module</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phonecatApp'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[]);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">get</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phones/phones.json'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">success</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">data</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
    $scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> data</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  $scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">orderProp </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span></code>
<div><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><span style="background-color: transparent;"><span style="font-size: inherit;">});</span></span></span></div>
</div>
</div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">$http向我们的服务器产生一个http GET请求，请求phones/hones.json(路径是相对于我们的index.html的)。服务器通过返回json文件中的数据来进行响应。</span></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">$http服务使用sucess方法返回一个</span></span><a href="https://docs.angularjs.org/tutorial/api/ng/service/$q" style="box-sizing: border-box; color: rgb(66, 139, 202); text-decoration: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: 0px 0px; background-repeat: initial initial;">promise object</a>。我们调用这个方法来处理异步响应，并且把phone数据赋给scope，作为一个叫做phones的数据模型。注意angular检测到这是Json响应并且自动帮我们处理好。</div>
<div>要使用angular的服务，只需要简单地在控制器的构造函数的输入参数中声明依赖的名字就好：</div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<div><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{...}</span></code></div>
</div>
</div>
<div>angular的依赖注入器会向你的控制器提供服务，当你的控制器构造的时候。同时依赖注入器也会帮你把所有依赖的依赖导入（根据你指定的依赖）</div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">注意参数的名字十分重要，因为依赖注入器靠名字来查找依赖关系</span></span></div>
<div><span style="font: 12.0px Helvetica"><img src="Step5%20XHRs%20&amp;%20Dependency%20Injection.resources/CC0CF2FC-E3CD-4F92-B135-665FD7A0616C.png" height="668" width="805"/></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
<div>
<hr/></div>
<div><span style="color: rgb(51, 51, 51);">$前缀转换</span></div>
<div><span style="color: rgb(51, 51, 51);">你可以创建属于你自己的服务，实际上我们将会在step11里面进行这一步操作。作为命名转换，angular的内置服务，作用域方法和一些其他的angular API会在名字前面添加一个$符号。</span></div>
<div><span style="color: rgb(51, 51, 51);">$前缀就相当于angular提供方法的命名空间，为了防止冲突，最好不要把你的方法或者数据模型命名为前缀带$的名字。</span></div>
<div><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">If you inspect a Scope, you may also notice some properties that begin with </span><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 5px; color: maroon; background-color: rgb(244, 244, 244); white-space: nowrap; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$$</span></code><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">. These properties are considered private, and should not be accessed or modified.</span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
<div>
<hr/></div>
<div>
<h3 style="box-sizing: border-box; font-family: 'Open Sans'; font-weight: 500; color: rgb(51, 51, 51); font-size: 24px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">A Note on Minification</h3>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Since Angular infers the controller's dependencies from the names of arguments to the controller's constructor function, if you were to <a href="http://goo.gl/SAnnsm" style="box-sizing: border-box; color: rgb(66, 139, 202); text-decoration: none; background-position: 0px 0px; background-repeat: initial initial;">minify</a> the JavaScript code for <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 5px; color: maroon; background-color: rgb(244, 244, 244); white-space: nowrap; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span></code> controller, all of its function arguments would be minified as well, and the dependency injector would not be able to identify services correctly.</p>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">We can overcome this problem by annotating the function with the names of the dependencies, provided as strings, which will not get minified. There are two ways to provide these injection annotations:</p>
<ul style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<li style="box-sizing: border-box;">
<p style="box-sizing: border-box;">Create a <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 5px; color: maroon; background-color: rgb(244, 244, 244); white-space: nowrap; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$inject</span></code> property on the controller function which holds an array of strings. Each string in the array is the name of the service to inject for the corresponding parameter. In our example, we would write:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; word-break: normal; word-wrap: break-word; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; white-space: pre-wrap;">
<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; white-space: pre-wrap; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{...}</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"
/><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$inject </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$scope'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$http'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">];</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">
phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">);</span></code>
</pre></li>
<li style="box-sizing: border-box;">
<p style="box-sizing: border-box;">Use an inline annotation where, instead of just providing the function, you provide an array. This array contains a list of the service names, followed by the function itself.</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; word-break: normal; word-wrap: break-word; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; white-space: pre-wrap;">
<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; white-space: pre-wrap; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{...}</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">
phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$scope'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$http'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">]);</span></code>
</pre></li>
</ul>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">Both of these methods work with any function that can be injected by Angular, so it's up to your project's style guide to decide which one you use.</p>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">When using the second method, it is common to provide the constructor function inline as an anonymous function when registering the controller:</p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; word-break: normal; word-wrap: break-word; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; white-space: pre-wrap; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; white-space: pre-wrap; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$scope'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$http'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{...}]);</span></code>
</pre>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">From this point onward, we're going to use the inline method in the tutorial. With that in mind, let's add the annotations to our <code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 5px; color: maroon; background-color: rgb(244, 244, 244); white-space: nowrap; border-top-left-radius: 5px; border-top-right-radius: 5px; border-bottom-right-radius: 5px; border-bottom-left-radius: 5px; background-position: initial initial; background-repeat: initial initial;"><span style="box-sizing: border-box; color: rgb(68, 85, 136);">PhoneListCtrl</span></code>:</p>
<p style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><strong style="box-sizing: border-box; font-weight: 700;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">app</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controllers</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span></code></strong></p>
<pre style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; word-break: normal; word-wrap: break-word; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; white-space: pre-wrap; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; white-space: pre-wrap; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> phonecatApp </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> angular</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">module</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phonecatApp'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[]);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">

phonecatApp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">[</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$scope'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'$http'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"
  /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">
    $http</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">get</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phones/phones.json'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">success</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">data</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">
      $scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> data</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"
    /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">

    $scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">orderProp </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);" /><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"
  /><span style="box-sizing: border-box; color: rgb(51, 51, 51);">}]);</span></code>
</pre></div>
<div><br/></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
<div>
<hr/></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">测试：</span></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">因为我们开始使用依赖注入器，而且我们的控制器开始含有依赖了，所以我们的测试会变得更加复杂。我们可以使用New操作符，以及给我们的控制器提供一些伪造的$http实现。幸运的是，angular给我们提供了用于单元测试的http服务。我们使用$httpBackend来给单元测试提供http响应：</span></span></div>
<div><strong style="box-sizing: border-box; font-weight: 700; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14.166666030883789px; font-style: normal; font-variant: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 12.499999046325684px; padding: 2px 4px; color: rgb(199, 37, 78); background-color: rgb(249, 242, 244); white-space: nowrap; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">test</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">unit</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">/</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">controllersSpec</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">js</span></code>:</strong></div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">describe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneCat controllers'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
describe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(){</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);">var</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> ctrl</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $httpBackend</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
 </span> <span style="box-sizing: border-box; color: rgb(153, 153, 136);">// Load our app module definition before each test.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  beforeEach</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">module</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phonecatApp'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">));</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
 </span> <span style="box-sizing: border-box; color: rgb(153, 153, 136);">// The injector ignores leading and trailing underscores here (i.e. _$httpBackend_).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(153, 153, 136);">// This allows us to inject a service but then attach it to a variable</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
 </span> <span style="box-sizing: border-box; color: rgb(153, 153, 136);">// with the same name as the service in order to avoid a name conflict.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  beforeEach</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">inject</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">_$httpBackend_</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $rootScope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">)</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
    $httpBackend </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> _$httpBackend_</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
    $httpBackend</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">expectGET</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'phones/phones.json'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
        respond</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">([{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">name</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Nexus S'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">},</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">name</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Motorola DROID'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">}]);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
    scope </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $rootScope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$new</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">();</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
    ctrl </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> $controller</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'PhoneListCtrl'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span></code>
<div><span style="font-size: inherit;"><span style="background-color: transparent;"> </span> <span style="box-sizing: border-box; color: rgb(51, 51, 51);"><span style="background-color: transparent;"><span style="font-size: inherit;">}));</span></span></span></span></div>
</div>
</div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">注意：因为我们载入了Jasmine和angular-mocks.js在我们的测试环境中，我们会得到两个帮助函数module和inject，用来访问和设置我们的依赖注入器</span></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">我们按照以下步骤建立我们的测试环境：</span></span></div>
<ul>
<li><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">我们用inject帮助函数把$rootScope,$controller和$httpBackend注入到Jasmine的beforeEach函数。这些实例来自一个注入器，对于每一个单独的测试，都会重新产生的一个注入器。保证了每一个测试都从一个已知的确定的点开始，而且每一个测试都和其他已经完成的测试的环境隔离开</span></span></li>
<li><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">我们产生一个新的作用域，使用$rootScope.$new()</span></span></li>
<li><span style="color: rgb(51, 51, 51);">我们调用注入的$controller函数，传递控制器的名字PhoneListCtrl，并且产生作用域作为参数</span></li>
</ul>
<div><span style="color: rgb(51, 51, 51);">因为我们的代码使用$http服务来获取phone list数据，在我们产生PhoneListCtrl的子作用域之前，我们必须告诉测试来期待一个马上来自控制器的请求，我们这样做：</span></div>
<ul>
<li><span style="color: rgb(51, 51, 51);">请求$httpBackend服务来注入到我们的beforeEach函数，这是一个在生产环境中产生所有XHR和JSONP请求的模拟版本的函数。这个模拟的函数允许你写测试，而不需要处理原生API和他们相关的全局状态</span></li>
<li><span style="color: rgb(51, 51, 51);">使用$httpBackend.expectGET方法来训练$httpBackend服务来处理一个即将到来的HTTP请求和告诉他应该是用什么响应。注意直到我们调用$httpBackend.flush方法，这些响应都不会被返回</span></li>
</ul>
<div><span style="color: rgb(51, 51, 51);">现在我们要建立一些断言，用以确认phones模型在响应返回之前不存在与我们的作用域之中：</span></div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">it</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'should create "phones" model with 2 phones fetched from xhr'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toBeUndefined</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">();</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  $httpBackend</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">flush</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">();</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
<br/>
  expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toEqual</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">([{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">name</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Nexus S'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">},</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
                               </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">name</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">:</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'Motorola DROID'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">}]);</span></code>
<div><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><span style="background-color: transparent;"><span style="font-size: inherit;">});</span></span></span></div>
</div>
</div>
<ul>
<li><span style="color: rgb(51, 51, 51);">我们使用$httpBackend.flush()来清理浏览器的请求队列。这会使promised的来自$http服务的返回被我们训练的响应接受。</span><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;">See 'Flushing HTTP requests' in the </span><a href="https://docs.angularjs.org/tutorial/api/ngMock/service/$httpBackend" style="box-sizing: border-box; color: rgb(66, 139, 202); text-decoration: none; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-position: 0px 0px; background-repeat: initial initial;">mock $httpBackend</a><span style="color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); float: none;"> documentation for a full explanation of why this is necessary.</span></li>
<li><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">我们使用断言，确定phone模型现在存在于作用域中</span></span></li>
</ul>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">最后我们确定orderProp的默认值被正确的设定：</span></span></div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">it</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'should set the default value of orderProp model'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">function</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">()</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">{</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/>
  expect</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">orderProp</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">).</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">toBe</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(221, 17, 68);">'age'</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">);</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"><br/></span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">});</span></code></div>
</div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">你应该看到以下输出：</span></span></div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: start; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;">
<div>Chrome 22.0: Executed 2 of 2 SUCCESS (0.028 secs / 0.007 secs)</div>
</div>
</div>
<div><br/></div>
<div>
<hr/></div>
<div><span style="color: rgb(51, 51, 51);">实验：</span></div>
<div><span style="color: rgb(51, 51, 51);">在index.html页面最下面加上</span></div>
<div><span style="box-sizing: border-box; color: navy; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">&lt;pre&gt;</span><span style="box-sizing: border-box; color: rgb(51, 51, 51); font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">{{phones | filter:query | orderBy:orderProp | json}}</span><span style="box-sizing: border-box; color: navy; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; white-space: nowrap; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(244, 244, 244);">&lt;/pre&gt;</span></div>
<div><span style="color: rgb(51, 51, 51);">来观察phone列表（用json格式）</span></div>
<div><span style="color: rgb(51, 51, 51);">在PhoneListCtrl控制器中，预处理使得列表只显示最前五个记录，在$http的回调函数中添加：</span></div>
<div>
<div style="box-sizing: border-box; overflow: auto; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; color: rgb(51, 51, 51); background-color: rgb(245, 245, 245); border: 1px solid rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; font-style: normal; font-variant: normal; font-weight: normal; letter-spacing: normal; orphans: auto; text-align: left; text-indent: 0px; text-transform: none; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px;"><code style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: inherit; padding: 0px; color: inherit; background-color: transparent; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px;"><span style="box-sizing: border-box; color: rgb(51, 51, 51);">$scope</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">phones </span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">=</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> data</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">.</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">splice</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">(</span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">0</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">,</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);"> </span><span style="box-sizing: border-box; color: rgb(68, 85, 136);">5</span><span style="box-sizing: border-box; color: rgb(51, 51, 51);">);</span></code></div>
</div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);">最终结果长这样：</span></span></div>
<div><img src="Step5%20XHRs%20&amp;%20Dependency%20Injection.resources/43695770-FA27-4E5D-864D-977E186B01A0.png" height="1478" width="2560"/></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
<div><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(51, 51, 51);"><br/></span></span></div>
</body></html>